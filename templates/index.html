<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Macro Calculator!</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='foundation.css') }}" />
    <script src="js/vendor/modernizr.js"></script>
  </head>
<body>

<div class="row">
      <div class="large-12 columns">
        <h1>Today's Cal Dining Menu:</h1>
      </div>
    </div>

    <div class="row">
      <div class="large-12 columns">
        <div class="panel">
          
          
       


 <script>
 var totalFat = 0;
 var totalProtein = 0; 
 var totalCalories =0;
 var totalCarb =0;
 var foods = new Array();
 var foodcount = 0;
 </script> 



 {% for item in foodlist %}

 

 <p>

  <!-- Subtrac Function  -->
  <button class="small round button" onclick="function subNutrients(){
    if (totalFat - {{item.get_fat()}} >= 0)
      {
      totalFat -= {{item.get_fat()}}

      }

    
    updateMytotalFat();
    if(totalProtein - {{item.get_protein()}} >= 0)
    {
    totalProtein -= {{item.get_protein()}}
    }
    
    updateMytotalProtein();

    if(totalCarb - {{item.get_carbs()}} >= 0)
    {
    totalCarb -= {{item.get_carbs()}}
    }
    updateMytotalCarb();

    if(totalCalories - {{item.get_calorie()}} >= 0)
    {
    totalCalories -= {{item.get_calorie()}}
    }
    
    updateMytotalCalories();
    removeFromBasket();
  }
  subNutrients();">Subtract</button>


  {{item.get_name() }}
  

  <!-- Add Function -->

  <button class="small round button" onclick="function addNutrients(){
    totalFat += {{item.get_fat()}}

    updateMytotalFat();

    
    totalProtein += {{item.get_protein()}}
    updateMytotalProtein();
        totalCarb += {{item.get_carbs()}}
    
    updateMytotalCarb();

    totalCalories += {{item.get_calorie()}}
    
    updateMytotalCalories();

    addToBasket( );
  }
  addNutrients();
  ">Add</button></br>





</p>
{% endfor %}

        </div>
      </div>
    </div>




<script type="text/javascript">
document.write('<span id="totalFat"> Total Fat  = ' + totalFat + '</span><br/><br/>');
document.write('<span id="totalProtein"> Total Protein  = ' + totalProtein + '</span><br/><br/>');
document.write('<span id="totalCarb"> Total Carbs  = ' + totalCarb + '</span><br/><br/>');
document.write('<span id="totalCalories"> Total Calories  = ' + totalCalories + '</span><br/><br/>');
/*document.write('<input type="button" value="Add One" onclick="addOne()"/>')

function addOne() { 
  x++; 
  updateMyX(); 
};*/


function updateMytotalFat() {
  document.getElementById( 'totalFat' ).innerHTML = 'Total Fat = '+ totalFat.toFixed(1);

}
function updateMytotalProtein(){
  document.getElementById( 'totalProtein' ).innerHTML = 'Total Protein = ' + totalProtein.toFixed(1); 
}



function updateMytotalCarb() {
  document.getElementById( 'totalCarb' ).innerHTML = 'Total Carbs = '+ totalCarb.toFixed(1);
}

function updateMytotalCalories() {
  document.getElementById( 'totalCalories' ).innerHTML = 'Total Calories = '+ totalCalories.toFixed(1);
}



function resetAll(){
   totalFat = 0;
  totalProtein = 0; 
  totalCalories =0;
  totalCarb =0;
  foodcount = 0
 document.getElementById( 'totalFat' ).innerHTML = 'Total Fat = '+ totalFat;
  document.getElementById( 'totalProtein' ).innerHTML = 'Total Protein = ' + totalProtein; 
 document.getElementById( 'totalCarb' ).innerHTML = 'Total Carbs = '+ totalCarb;
  document.getElementById( 'totalCalories' ).innerHTML = 'Total Calories = '+ totalCalories;
  var x = document.getElementById("basket");
  x.innerHTML =  "None"
}

function addToBasket()
{
  foodcount += 1
  var x = document.getElementById("basket");
  x.innerHTML='' + foodcount;
}

function removeFromBasket()
{
  foodcount -= 1
  var x = document.getElementById("basket");
  x.innerHTML='' + foodcount;
}

</script> 

  <button onclick="resetAll()">Reset</button></br>

  <p> Number of foods added so far: </p>
  <p id="basket"> None </p>


</body>
</html>

<!-- Seems to be only executing the last function -->